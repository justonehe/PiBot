[Unit]
Description=PiBot V3 Worker
After=network.target

[Service]
Type=simple
User=justone
WorkingDirectory=/home/justone/pibot-worker
# API Key should be set in /home/justone/pibot-worker/.env file
Environment="VOLC_BASE_URL=https://ark.cn-beijing.volces.com/api/coding/v3"
Environment="MODEL_NAME=doubao-seed-code"
Environment="WORKER_ID=worker-1"
ExecStart=/usr/bin/python3 /home/justone/pibot-worker/worker_task_executor.py --port 5000 --worker-id worker-1
Restart=always
RestartSec=10
StandardOutput=append:/home/justone/pibot-worker/logs/worker.log
StandardError=append:/home/justone/pibot-worker/logs/worker.log

[Install]
WantedBy=multi-user.target